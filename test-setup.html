<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Backend & Create Admin</title>
    <style>
        body {
            font-family: monospace;
            background: #1a1a1a;
            color: #0f0;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }

        button {
            background: #0f0;
            color: #000;
            border: none;
            padding: 10px 20px;
            margin: 10px 5px;
            cursor: pointer;
            font-family: monospace;
            font-weight: bold;
        }

        button:hover {
            background: #0d0;
        }

        .log {
            background: #000;
            border: 1px solid #0f0;
            padding: 10px;
            margin: 10px 0;
            min-height: 100px;
            max-height: 400px;
            overflow-y: auto;
        }

        .success {
            color: #0f0;
        }

        .error {
            color: #f00;
        }

        .info {
            color: #0ff;
        }

        function log(message, type='info') {
            const logDiv=document.getElementById('log');
            const timestamp=new Date().toLocaleTimeString();

            logDiv.innerHTML+=`<div class="${type}">[$ {
                timestamp
            }

            ] $ {
                message
            }

            </div>`;
            logDiv.scrollTop=logDiv.scrollHeight;
        }

        function clearLog() {
            document.getElementById('log').innerHTML='';
        }

        async function testBackend() {
            log('Testing backend health...', 'info');

            try {
                const response=await fetch(`$ {
                        BACKEND_URL
                    }

                    /health`);
                const data=await response.json();

                if (response.ok) {
                    log(`âœ… Backend is running: $ {
                            data.message
                        }

                        `, 'success');
                }

                else {
                    log(`âŒ Backend returned error: $ {
                            response.status
                        }

                        `, 'error');
                }
            }

            catch (error) {
                log(`âŒ Backend is not reachable: $ {
                        error.message
                    }

                    `, 'error');
            }
        }

        async function createAdmin() {
            log('Creating admin account...', 'info');

            try {
                const response=await fetch(`$ {
                        BACKEND_URL
                    }

                    /api/setup/create-admin`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    }

                    ,
                    body: JSON.stringify({
                        secret: 'TidalPower2024Setup'
                    })
            });

        const data=await response.json();

        if (response.ok) {
            log(`âœ… $ {
                    data.message
                }

                `, 'success');

            log(`ðŸ“§ Email: $ {
                    data.user.email
                }

                `, 'info');

            log(`ðŸ”‘ Password: $ {
                    data.tempPassword
                }

                `, 'info');

            log(`ðŸ‘¤ Role: $ {
                    data.user.role
                }

                `, 'info');
        }

        else {
            log(`âŒ Failed: $ {
                    data.error
                }

                `, 'error');
            log(JSON.stringify(data, null, 2), 'error');
        }
        }

        catch (error) {
            data.error
        }

        `,
        'error');
        }
        }

        catch (error) {
            log(`âŒ Network error: $ {
                    error.message
                }

                `, 'error');
        }
        }

        // Auto-test on load
        window.onload=()=> {
            log('ðŸš€ Backend Tester Ready', 'success');
            log('Click buttons above to test backend functionality', 'info');
        }

        ;
        </script></body></html>