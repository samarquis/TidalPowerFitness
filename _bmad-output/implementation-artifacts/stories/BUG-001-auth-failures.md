# Bug Story: BUG-001 - Authentication Failures (401 Unauthorized)

**Status:** IN_PROGRESS
**Priority:** CRITICAL
**Date Logged:** 2026-01-01

## Problem Description
The application is reporting `401 Unauthorized` errors on two critical endpoints:
1. `GET /api/auth/profile`: Failing to load user profile.
2. `POST /api/auth/login`: Failing to authenticate credentials.

## Context
These errors occurred immediately following the migration from Render Managed DB to Neon.tech PostgreSQL.

## Initial Hypothesis
1. **Login 401**: The user credentials (email/password) in the newly seeded Neon database may not match what the frontend is sending, or the password hashing salt differs.
2. **Profile 401**: The JWT token generated by the server is either not being sent by the browser (CORS/Cookie issue) or is failing verification due to a `JWT_SECRET` mismatch between the environment and the application.

## Investigation Steps
- [x] Verify user exists in Neon DB with correct password hash.
    - **Finding**: User exists, but the bcrypt hash in the seed data was invalid for the password 'admin123'.
    - **Fix**: Generated a new valid hash and updated the database and `seed.sql`.
- [ ] Check CORS and Cookie settings in `backend/src/app.ts`.
- [ ] Verify `JWT_SECRET` consistency.
- [x] Test login flow with known credentials.
    - **Result**: Local test confirms 'admin123' now matches the hash.

## Root Cause
The `seed.sql` file contained an incorrect bcrypt hash for the default password `admin123`. This caused all logins to fail with 401 Unauthorized, even though the user existed.
